Warning! 

В class Controller не происходит response.encodeURL(request.getContextPath())